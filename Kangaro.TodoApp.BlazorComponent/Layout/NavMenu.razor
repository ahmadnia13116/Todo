
<MudNavMenu>
	<MudNavLink Href="/" Match="NavLinkMatch.All">Dashboard</MudNavLink>
	<MudNavLink Href="/Index" Match="NavLinkMatch.Prefix">Index</MudNavLink>
	<MudNavLink Href="/lifecycle-demo" Match="NavLinkMatch.Prefix">lifecycle</MudNavLink>
	<MudNavLink Href="/lifecycle-async" Match="NavLinkMatch.Prefix">lifecycleAsync</MudNavLink>
	<MudNavGroup Title="Settings" Expanded="false">
		<MudNavLink Href="/Users" Match="NavLinkMatch.Prefix">Users</MudNavLink>
		<MudNavLink Href="/Role" Match="NavLinkMatch.Prefix">Roles</MudNavLink>
	</MudNavGroup>
	<MudNavLink Href="/about" Match="NavLinkMatch.Prefix">About</MudNavLink>



	<ListNavToDo Lists="_lists"
				 OnSelectList="SelectList"
				 OnAddList="AddListFromChild"
				 OnDeleteList="DeleteListFromChild" />
</MudNavMenu>


@code {
	[Inject] private ICategoryService ListService { get; set; } = default!;
	private List<ListItemDto> _lists = new();
	private ListItemDto? _selectedList;

	protected override async Task OnInitializedAsync()
	{
		_lists = new(await ListService.GetListAsync());
	}

	private void SelectList(ListItemDto list)
	{
		_selectedList = list;
	}

	private async Task AddListFromChild(string newListName)
	{
		if (string.IsNullOrWhiteSpace(newListName)) return;

		var list = new ListItemDto { Name = newListName };
		await ListService.CreateAsync(list);
		_lists = new(await ListService.GetListAsync());
	}

	private async Task DeleteListFromChild(Guid id)
	{
		await ListService.DeleteAsync(id);
		_lists = new(await ListService.GetListAsync());
	}
}